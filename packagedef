////////////////////////////////////////////////////////////
// Описание пакета для сборки и установки
// Полную документацию см. на hub.oscript.io/packaging
//
Процедура ПередСборкой(Знач РабочийКаталог) Экспорт
        
        ФС.ОбеспечитьПустойКаталог(ОбъединитьПути(РабочийКаталог, "oscript_modules"));
        
        Сообщить("Запаковка бинарных данных библиотек");
        КомандаOpm = Новый Команда;
        
        КомандаOpm.УстановитьКоманду("opm");
        КомандаOpm.ДобавитьПараметр("run pack");
        КомандаOpm.ДобавитьЛогВыводаКоманды("task.build");
        
        КодВозврата = КомандаOpm.Исполнить();
        
        Если КодВозврата <> 0 Тогда
                ВызватьИсключение КомандаOpm.ПолучитьВывод();
        КонецЕсли;
        
        Сообщить("Установка локальных зависимостей библиотек");
        КомандаOpm = Новый Команда;
        
        КомандаOpm.УстановитьКоманду("opm");
        КомандаOpm.ДобавитьПараметр("install -l");
        КомандаOpm.ДобавитьЛогВыводаКоманды("task.build");
        
        КодВозврата = КомандаOpm.Исполнить();
        
        Если КодВозврата <> 0 Тогда
                ВызватьИсключение КомандаOpm.ПолучитьВывод();
        КонецЕсли;
        
КонецПроцедуры

Описание.Имя("gitsync-plugins")
        .Версия("2.0.0")
        .Автор("Khorev A.A. and SilverBulleters")
        .АдресАвтора("khorevaa@gmail.com,help@silverbulleters.org")
        .Описание("Набор предустановленных плагинов для gitsync")
        .ВерсияСреды("1.9.2")
        .ВключитьФайл("src")
        .ВключитьФайл("docs")
        .ВключитьФайл("oscript_modules")
        .ЗависитОт("strings", "0.4.1")
        .РазработкаЗависитОт("1testrunner", "1.9.2")
        .РазработкаЗависитОт("1bdd", "1.15.1")
        .РазработкаЗависитОт("notify", "0.2.0")
        .РазработкаЗависитОт("coverage", "0.7.0")
        .ОпределяетКласс("Плагин_ИнкрементальнаяВыгрузка", "src/Классы/increment.os")
        .ОпределяетКласс("Плагин_УстановкиЛимитов", "src/Классы/limit.os")
        .ОпределяетКласс("Плагин_ПроверкиАвторов", "src/Классы/checkAuthors.os")
        .ОпределяетКласс("Плагин_ПроверкиКомментариев", "src/Классы/checkComments.os")
        .ОпределяетКласс("Плагин_УстановкиТеговВерсий", "src/Классы/smartTags.os")
        .ОпределяетКласс("Плагин_Tool1CD", "src/Классы/tool1CD.os")
        .ОпределяетКласс("Плагин_РаспаковкиОбычныхФорм", "src/Классы/unpackForm.os")
        .ОпределяетКласс("Плагин_СнятияСПоддержки", "src/Классы/disableSupport.os")
        .ОпределяетКласс("Плагин_СинхронизацииСУдаленнымРепозиторием", "src/Классы/syncRemote.os")
        .ОпределяетКласс("Плагин_ВыгрузкаВФорматеEDT", "src/Классы/edtExport.os")
        .ОпределяетКласс("Плагин_ЗаменаАвторов", "src/Классы/replaceAuthors.os")
        .ОпределяетКласс("Плагин_Ibcmd", "src/Классы/useIbcmd.os")
        .ОпределяетКласс("Плагин_DropConfigDump", "src/Классы/dropConfigDump.os")
        .ОпределяетКласс("Плагин_DropSupport", "src/Классы/dropSupport.os")
        .ОпределяетКласс("Плагин_RoboCopy", "src/Классы/roboCopy.os")
        ;